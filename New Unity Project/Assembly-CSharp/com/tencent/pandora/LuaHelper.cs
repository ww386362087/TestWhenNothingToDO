namespace com.tencent.pandora
{
    using System;
    using System.Reflection;
    using System.Runtime.CompilerServices;

    public static class LuaHelper
    {
        public static System.Action Action(LuaFunction func)
        {
            <Action>c__AnonStorey32 storey = new <Action>c__AnonStorey32();
            storey.func = func;
            return new System.Action(storey, (IntPtr) this.<>m__7);
        }

        public static PanelManager GetPanelManager()
        {
            return AppFacade.Instance.GetManager<PanelManager>("PanelManager");
        }

        public static ResourceManager GetResManager()
        {
            return AppFacade.Instance.GetManager<ResourceManager>("ResourceManager");
        }

        public static Type GetType(string classname)
        {
            Assembly executingAssembly = Assembly.GetExecutingAssembly();
            Type type = null;
            type = executingAssembly.GetType(classname);
            if (type == null)
            {
                type = executingAssembly.GetType(classname);
            }
            return type;
        }

        public static void OnCallLuaFunc(LuaStringBuffer data, LuaFunction func)
        {
            byte[] str = data.buffer;
            if (func != null)
            {
                LuaScriptMgr manager = AppFacade.Instance.GetManager<LuaScriptMgr>("LuaScriptMgr");
                int oldTop = func.BeginPCall();
                LuaDLL.lua_pushlstring(manager.lua.L, str, str.Length);
                if (func.PCall(oldTop, 1))
                {
                    func.EndPCall(oldTop);
                }
            }
        }

        public static void OnJsonCallFunc(string data, LuaFunction func)
        {
            if (func != null)
            {
                object[] args = new object[] { data };
                func.Call(args);
            }
        }

        [CompilerGenerated]
        private sealed class <Action>c__AnonStorey32
        {
            internal LuaFunction func;

            internal void <>m__7()
            {
                this.func.Call();
            }
        }
    }
}

